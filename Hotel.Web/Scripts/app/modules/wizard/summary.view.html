<!-- Summary content -->
<h2 class="font-bold">Order Summary</h2>

<div class="m-b-md" ng-if="wizardCtrl.vm.SelectedServiceInfo!=null">
    <label class="label label-primary" id="label-price">{{wizardCtrl.vm.SelectedServiceInfo!=null?(wizardCtrl.vm.SelectedServiceInfo.CustomerPrice | currency:wizardCtrl.vm.SelectedServiceInfo.MoneySymbol+ ' '):0}}</label>
    <a ng-if="wizardCtrl.vm.CurrentStep == 3 && wizardCtrl.vm.couponLoading == false" ng-click="wizardCtrl.showCouponPopup()" class="m-l">Add Coupon</a>
    <!--<div class="btn-group">
        <button class="btn btn-danger btn-lg">{{wizardCtrl.vm.SelectedServiceInfo!=null?(wizardCtrl.vm.SelectedServiceInfo.CustomerPrice | currency:wizardCtrl.vm.SelectedServiceInfo.MoneySymbol+ ' '):0}}</button>
        <button class="btn btn-danger btn-lg" data-toggle="collapse" href="#collapse-price-breakdown">
            <i class="fa fa-angle-down"></i>
        </button>
    </div>-->

    <div class="m-t-sm" ng-show="wizardCtrl.vm.CurrentStep == 3 && wizardCtrl.vm.coupon == null && wizardCtrl.vm.couponLoading == false"><a>Do you have any coupon?</a></div>
    <div class="m-t-sm <!--collapse-->" id="collapse-price-breakdown" ng-show="wizardCtrl.vm.coupon != null && wizardCtrl.vm.coupon.Discounts!=null && wizardCtrl.vm.coupon.Discounts.length>0 && wizardCtrl.vm.couponLoading == false">
        <table class="table table-no-border" id="table-price-breakdown">
            <tbody>
                <tr>
                    <td>Sub-Total</td>
                    <td class="text-right">{{wizardCtrl.vm.SelectedServiceInfo.MoneySymbol}}&nbsp;{{wizardCtrl.vm.coupon.Subtotal.Value| number:2}}</td>
                </tr>
                <tr>
                    <td>Coupon</td>
                    <td class="text-right"></td>
                </tr>
                <tr class="tr-coupon-item" ng-repeat="discount in wizardCtrl.vm.coupon.Discounts">
                    <td>
                        <span ng-bind="discount.CouponId"></span>
                        <a data-toggle="tooltip" title="Remove" class="fa fa-times m-l-sm" ng-hide="(discount.GlobalPromotion!=null && discount.GlobalPromotion==true && wizardCtrl.vm.CurrentStep == 3) || wizardCtrl.vm.CurrentStep!=3" ng-click="wizardCtrl.removeCoupon(discount.CouponId)"></a>
                    </td>
                    <td class="text-right">{{wizardCtrl.vm.SelectedServiceInfo.MoneySymbol}}&nbsp;{{discount.Value.Value| number:2}}</td>
                </tr>
                <tr class="font-bold tr-total-cost">
                    <td>Total</td>
                    <td class="text-right">{{wizardCtrl.vm.SelectedServiceInfo.MoneySymbol}}&nbsp;{{wizardCtrl.vm.coupon.TotalDue.Value| number:2}}</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="m-t-sm" ng-show="(wizardCtrl.vm.CurrentStep !=0 ) && wizardCtrl.vm.couponLoading == true">
        <!--<div class="progress">
            <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
            </div>
        </div>-->
        <label class="label">Coupon is loading...</label>
    </div>
</div>

<div class="m-b-md">
    <div class="m-b-xs"><span class="text-muted">Parcels Type</span></div>
    <table class="table table-no-border" id="table-summary-parcels" ng-if="wizardCtrl.vm.parcelSelect.length >0">
        <tbody>
            <tr ng-repeat="parcel in wizardCtrl.vm.parcelSelect">
                <td class="td-parcel-image">
                    <img ng-show="parcel.parcel.icon!=null" src='{{parcel.parcel.icon.uri}}' width='20' />
                </td>
                <td class="td-parcel-quantity td-nowrap text-right">{{parcel.quantity}} &times;</td>
                <td>
                    <span>{{parcel.parcel.name}}</span>&nbsp;<span ng-show="parcel.parcel.dimension!=null">({{parcel.parcel.dimension.length}}{{parcel.parcel.dimension.units==1?'cm':'in'}}&nbsp;&times;&nbsp;{{parcel.parcel.dimension.width}}{{parcel.parcel.dimension.units==1?'cm':'in'}}&nbsp;&times;&nbsp;{{parcel.parcel.dimension.height}}{{parcel.parcel.dimension.units==1?'cm':'in'}})</span>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-no-border" id="table-summary-parcels" ng-if="!wizardCtrl.vm.parcelSelect || wizardCtrl.vm.parcelSelect.length==0">
        <tbody>
            <tr>
                <td>None</td>
            </tr>
        </tbody>
    </table>
</div>

<div class="m-b-md">
    <div class="m-b-xs">
        <span class="text-muted">Pickup</span>
    </div>
    <div ng-if="wizardCtrl.vm.pickupContact.address=='' && wizardCtrl.vm.SelectedServiceInfo==null">None</div>
    <div ng-if="wizardCtrl.vm.pickupContact.address!=''">{{wizardCtrl.vm.pickupContact.address}}</div>
    <div ng-if="wizardCtrl.vm.SelectedServiceInfo!=null">
        {{wizardCtrl.getDatePlainText(wizardCtrl.vm.SelectedServiceInfo.CollectionWindow.Date)}}
        <strong>{{wizardCtrl.vm.SelectedServiceInfo.CollectionWindow.FromTime | date: wizardCtrl.vm.setting.formatTime}}  - {{wizardCtrl.vm.SelectedServiceInfo.CollectionWindow.ToTime | date: wizardCtrl.vm.setting.formatTime}}</strong> by
        <strong>{{ wizardCtrl.vm.SelectedServiceInfo.NetWorkInfo.Name }}</strong>
    </div>
    <div ng-if="wizardCtrl.vm.pickupContact!=null && wizardCtrl.vm.pickupContact.contactName.trim().length>0">Contact: <strong>{{wizardCtrl.vm.pickupContact.contactName}}</strong></div>
</div>

<div class="m-b-md">
    <div class="m-b-xs">
        <span class="text-muted">Delivery</span>
    </div>
    <div ng-if="wizardCtrl.vm.deliveryContact.address=='' && wizardCtrl.vm.SelectedServiceInfo==null">None</div>
    <div ng-if="wizardCtrl.vm.deliveryContact.address!=''">{{wizardCtrl.vm.deliveryContact.address}}</div>
    <div ng-if="wizardCtrl.vm.SelectedServiceInfo!=null">
        {{wizardCtrl.getDatePlainText(wizardCtrl.vm.SelectedServiceInfo.DeliveryWindow.Date)}}
        <strong>{{wizardCtrl.vm.SelectedServiceInfo.DeliveryWindow.FromTime | date: wizardCtrl.vm.setting.formatTime}}  - {{wizardCtrl.vm.SelectedServiceInfo.DeliveryWindow.ToTime | date: wizardCtrl.vm.setting.formatTime}}</strong> by
        <strong>{{ wizardCtrl.vm.SelectedServiceInfo.NetWorkInfo.Name }}</strong>
    </div>
    <div ng-if="wizardCtrl.vm.deliveryContact!=null && wizardCtrl.vm.deliveryContact.contactName.trim().length>0">Contact: <strong>{{wizardCtrl.vm.deliveryContact.contactName }}</strong></div>
</div>


<div class="m-b-md" ng-if="wizardCtrl.vm.SelectedServiceInfo!=null && wizardCtrl.vm.SelectedServiceInfo.IsCoDCollection">
    <div class="m-b-xs"><strong class="text-muted">Cash on Delivery Collection</strong></div>
    <div>{{wizardCtrl.vm.SelectedServiceInfo!=null?(wizardCtrl.vm.SelectedServiceInfo.CoDAmount | currency:wizardCtrl.vm.SelectedServiceInfo.MoneySymbol+ ' '):0}}</div>
</div>
<!-- Summary content -->

<div class="m-b-md map-frame" ng-if="wizardCtrl.vm.staticMapUrl !== ''">
    <a style="background-image: url({{wizardCtrl.vm.staticMapUrl}})"></a>
</div>
